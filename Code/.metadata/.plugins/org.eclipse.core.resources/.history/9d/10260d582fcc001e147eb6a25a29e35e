//in reference manual user push button is in PC13 pin 2
// this good for sensors
#include <stdint.h>
#include <stdio.h>
#include "stm32f4xx.h"
#include "uart.h"
#include "adc.h"
#include "systick.h"
#include "tim.h"
#include "exti.h"

#define GPIOAEN	(1U<<0)
#define PIN5	(1U<<5)
#define LED		PIN5

char key;

int main(void)
{
	RCC->AHB1ENR |= GPIOAEN;
	GPIOA->MODER |= (1U<<10);
	GPIOA->MODER &=~ (1U<<11);


	uart2_rx_interrupt_init();

	while(1)
	{

	}
}


void USART2_IRQHandler(void)
{
	//check if RXNE is set
	if (USART2->SR & SR_RXNE)
	{
		// sets key to data in usart
		//do something
		key = USART2->DR;
		if(key == '1'){
			GPIOA->ODR |= LED;

		}
		else{
			GPIOA->ODR &= ~LED;
		}
	}
}


